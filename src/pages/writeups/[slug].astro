---
import Layout from '../../layouts/Layout.astro';
import { getEntryBySlug, getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('writeups');
  return posts.map((p) => ({ params: { slug: p.slug } }));
}

const { slug } = Astro.params;
const entry = slug ? await getEntryBySlug('writeups', slug) : undefined;
if (!entry) {
  return Astro.redirect('/writeups');
}
const { Content } = await entry.render();
const { data } = entry;
---

<Layout>
  <main class="mx-auto max-w-3xl p-6">
    <a class="text-blue-600 hover:underline" href="/writeups/">← Volver</a>
    <h1 class="text-3xl font-bold mt-2">{data.title}</h1>
    <div class="text-sm text-neutral-500 mb-6">{data.date.toISOString().slice(0, 10)}</div>
    <article class="prose dark:prose-invert max-w-none">
      <Content />
    </article>
  </main>
</Layout> 